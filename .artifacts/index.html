<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>Local CI Summary</title>
<style>
 body{font-family:Segoe UI, sans-serif;margin:16px}
 .row{display:flex;gap:10px;align-items:center}
 .tz-table{margin-top:14px}
 .badge{padding:4px 8px;border:1px solid #ddd;border-radius:6px;background:#f6f6f6}
</style>
</head>
<body>
  <p>Generated: 11/12/2025 05:45:48</p>

  <div class="row">
    <label><b>Timezone:</b></label>
    <select id="tzSelect"><option value="">Local time (default)</option>
<option value="Eastern">Eastern</option>
<option value="Central">Central</option>
<option value="Mountain">Mountain</option>
<option value="Pacific">Pacific</option>
<option value="UTC">UTC</option></select>
    <button id="tzBtn" class="badge">TZ: Local time (default)</button>
  </div>

  <h2>Local CI Run Trend</h2>
  <img id="ciChart" src="ci/runs/runs_trend_local.png" width="800"/>

  <div id="tablesHost">
    <div class='tz-table' data-tz='local' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 16)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
<tr><td>2025-11-11T11:27:30</td><td style='text-align:right'>51</td><td style='text-align:right'>0.13</td></tr>
<tr><td>2025-11-11T12:42:37</td><td style='text-align:right'>11759</td><td style='text-align:right'>1237.011</td></tr>
<tr><td>2025-11-11T12:48:01</td><td style='text-align:right'>11760</td><td style='text-align:right'>1237.012</td></tr>
<tr><td>2025-11-11T12:50:32</td><td style='text-align:right'>11761</td><td style='text-align:right'>1237.012</td></tr>
<tr><td>2025-11-11T12:54:52</td><td style='text-align:right'>11762</td><td style='text-align:right'>1237.012</td></tr>
</table>
</div>
<div class='tz-table' data-tz='eastern' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 0)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
</table>
</div>
<div class='tz-table' data-tz='central' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 0)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
</table>
</div>
<div class='tz-table' data-tz='mountain' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 0)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
</table>
</div>
<div class='tz-table' data-tz='pacific' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 0)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
</table>
</div>
<div class='tz-table' data-tz='utc' style='display:none'><h3>Last 5 Runs <span style='font-size:12px;color:#555'>(TZ: Local, valid rows: 0)</span></h3>
<table border='1' cellpadding='6' cellspacing='0' style='border-collapse:collapse;font-family:Segoe UI,sans-serif'>
<tr><th>Timestamp</th><th>Files</th><th>Total MB</th></tr>
</table>
</div>
  </div>

  <div style="margin-top:10px;color:#888;font-size:12px"><div style='margin-top:10px;color:#888;font-size:12px'>Use rebuild_ci.cmd to refresh without adding a new run.</div></div>

<script>
(function(){
  function getParam(name){
    const u = new URL(window.location.href);
    return u.searchParams.get(name) || "";
  }
  function showTable(tz){
    document.querySelectorAll('.tz-table').forEach(div=>{
      div.style.display = (div.getAttribute('data-tz') === tz) ? 'block' : 'none';
    });
  }
  function applyTZ(tz){
    const chart = document.getElementById('ciChart');
    // compute image path from tz
    const stem = 'ci/runs/runs_trend_';
    chart.src = stem + (tz ? tz : 'local') + '.png';
    showTable(tz || '');
    const badge = document.getElementById('tzBtn');
    badge.textContent = 'TZ: ' + (tz || 'Local time (default)');
    const u = new URL(window.location.href);
    if (tz) { u.searchParams.set('tz', tz); } else { u.searchParams.delete('tz'); }
    history.replaceState(null, '', u.toString());
  }

  // init selection
  const initial = getParam('tz');               // "", "Eastern", ...
  const sel = document.getElementById('tzSelect');
  sel.value = initial;
  applyTZ(initial);

  sel.addEventListener('change', ()=>applyTZ(sel.value));
  document.getElementById('tzBtn').addEventListener('click', ()=>applyTZ(sel.value));
})();
</script>
<!-- SUMMARY PNG PANEL INSERTED -->
<div style="margin-top:16px;padding-top:10px;border-top:1px solid #eee">
  <div style="color:#666;font:12px/1.4 system-ui,sans-serif;margin-bottom:6px">
    Aggregate across sim runs (Avg Total MB)
  </div>
  <img src="metrics/summary.png" alt="Summary across runs" style="max-width:100%;height:auto;border:1px solid #eee;border-radius:8px"/>
</div>
<!-- METRICS BADGE BEGIN -->
<div id='metrics-badge' style='display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;padding:.6rem .8rem;border-radius:1rem;border:1px solid #e5e7eb;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";font-size:.9rem;'>
  <span class='dot' style='width:.6rem;height:.6rem;border-radius:9999px;background:#10b981;display:inline-block' title='Healthy'></span>
  <span class='label' style='font-weight:600;margin-right:.1rem'>Latest CI</span>
  <span class='kv' style='padding:.15rem .45rem;border-radius:.6rem;background:#f8fafc;border:1px solid #e5e7eb'><b>Count</b>: 47</span>
</div>
<!-- METRICS BADGE END -->
</body>
</html>


