name: PR CI

on:
  pull_request:
    branches: [ main ]
    types: [opened, synchronize, reopened]
  workflow_dispatch:

jobs:
  build-test:
    name: Build & Test (Windows self-hosted)
    runs-on: [self-hosted, windows, sim]
    timeout-minutes: 30

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Show runner context
        shell: pwsh
        run: |
          Write-Host "Runner: $env:RUNNER_NAME"
          Write-Host "OS: $env:RUNNER_OS $env:ImageOS"
          Write-Host "Labels: $env:RUNNER_LABELS"

      - name: Python smoke (optional)
        shell: pwsh
        run: |
          python --version 2>$null; if ($LASTEXITCODE) { Write-Host "Python not found, skipping."; exit 0 }

      - name: Placeholder — replace with real build/test steps
        shell: pwsh
        run: |
          Write-Host "Hello from self-hosted Windows runner"
